{"ast":null,"code":"var nativeEvents = require(\"./native\");\nvar pjaxEvents = require(\"./pjax\");\nvar turbolinksEvents = require(\"./turbolinks\");\nvar turbolinksClassicDeprecatedEvents = require(\"./turbolinksClassicDeprecated\");\nvar turbolinksClassicEvents = require(\"./turbolinksClassic\");\n\n// see what things are globally available\n// and setup event handlers to those things\nmodule.exports = function (ujs) {\n  if (ujs.handleEvent) {\n    // We're calling this a second time -- remove previous handlers\n    if (typeof Turbolinks !== \"undefined\" && typeof Turbolinks.EVENTS !== \"undefined\") {\n      turbolinksClassicEvents.teardown(ujs);\n    }\n    turbolinksEvents.teardown(ujs);\n    turbolinksClassicDeprecatedEvents.teardown(ujs);\n    pjaxEvents.teardown(ujs);\n    nativeEvents.teardown(ujs);\n  }\n  if ('addEventListener' in window) {\n    ujs.handleEvent = function (eventName, callback) {\n      document.addEventListener(eventName, callback);\n    };\n    ujs.removeEvent = function (eventName, callback) {\n      document.removeEventListener(eventName, callback);\n    };\n  } else {\n    ujs.handleEvent = function (eventName, callback) {\n      window.attachEvent(eventName, callback);\n    };\n    ujs.removeEvent = function (eventName, callback) {\n      window.detachEvent(eventName, callback);\n    };\n  }\n\n  // Detect which kind of events to set up:\n  if (typeof Turbolinks !== 'undefined' && Turbolinks.supported) {\n    if (typeof Turbolinks.EVENTS !== 'undefined') {\n      // Turbolinks.EVENTS is in classic version 2.4.0+\n      turbolinksClassicEvents.setup(ujs);\n    } else if (typeof Turbolinks.controller !== \"undefined\") {\n      // Turbolinks.controller is in version 5+\n      turbolinksEvents.setup(ujs);\n    } else {\n      turbolinksClassicDeprecatedEvents.setup(ujs);\n    }\n  } else if (typeof $ !== \"undefined\" && typeof $.pjax === 'function') {\n    pjaxEvents.setup(ujs);\n  } else {\n    nativeEvents.setup(ujs);\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}